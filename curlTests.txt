#!/bin/bash
UNIQUEID=fauzika

#partner: Alex Kwon

#change the following to a token associated with your user id
TOKEN=6a6374ca64bcb31ab748097bd8b5b1500f52550a

curl -o q -q -X 'POST' -d '{"user":"test","password":"adsf"}' http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/user 2>/dev/null 
A=$(cat q)
  echo  "Login Test with bad credentials Should Fail $A"

  curl -q -X 'POST' -d '{"user":"test33","password":"test"}' http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/user 2>/dev/null >q
  A=$(cat q)
  echo  "Login Test with bad user Should Fail $A"


  curl -X 'POST' -H "Content-Type: application/json" -d '{"user":"fauzika","password":"test"}' http://ceclnx01.cec.miamioh.edu/~fauzika/api/user 2>/dev/null >q
  A=$(cat q)
  echo  "Login Test with good credentials Should give token $A NOTE: do this curl manually if it doesn't work. It works on our site, but this was originally tested on windows"


  curl -q  http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/items 2>/dev/null > q
  A=$(cat q)
  echo "Should display items $A"

  curl -q  http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/itemsSummary/${TOKEN} 2>/dev/null > q
  A=$(cat q)
  echo "Should display Summary $A"

  curl -X 'POST' -d "{\"token\":\"${TOKEN}\",\"itemFK\":1}" http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/items 2>/dev/null >q
  A=$(cat q)
  echo "Should add $A"

  curl -q  http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/itemsSummary/${TOKEN} 2>/dev/null > q
  A=$(cat q)
  echo "Should display Summary and one item should have increased $A"

  curl -X 'POST' -d "{\"token\":\"fasdf\",\"itemFK\":1}" http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/items 2>/dev/null >q
  A=$(cat q)
  echo "Should not add - bad token $A"

  curl -X 'POST' -d "{\"token\":\"${TOKEN}\",\"itemFK\":100}" http://ceclnx01.cec.miamioh.edu/~${UNIQUEID}/api/items 2>/dev/null >q
  A=$(cat q)
  echo "Should not add - bad item $A"

